<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
          html { height: 100% }
          body { height: 100%; margin: 0; padding: 0 }
          #map_canvas { height: 100% }
        </style>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script type="text/javascript">
          $(function(){
              var map = new google.maps.Map(document.getElementById('map_canvas'), {
                  zoom: 2,
                  center: new google.maps.LatLng(0.0, 0.0),
                  mapTypeId: google.maps.MapTypeId.HYBRID
              });
              
              var trace = new google.maps.Polyline({
                 strokeColor: "#FF0000",
                 strokeWeight: 3,
                 strokeOpacity: 1.0 
              });
              
              trace.setMap(map);
              
              var loadTrace = function(url) {
                  $.get(url, function(data) {
                      var positions = data['positions'];
                  
                      var bounds = new google.maps.LatLngBounds();

                      for (var i = 0; i < positions.length; i++) {
                          pos = positions[i];
                      
                          lat = pos['latitude'];
                          lon = pos['longitude'];
                      
                          latlng = new google.maps.LatLng(lat, lon);
                      
                          bounds.extend(latlng);
                                            
                          trace.getPath().push(latlng);                     
                      }
                  
                      map.fitBounds(bounds);
                  });
              }
              
              var url = prompt("What is the URL?");
              
              loadTrace(url);
          })
        </script>
    </head>
      <body>
          <div id="map_canvas" style="width:100%; height:100%"></div>
      </body>
</html>
